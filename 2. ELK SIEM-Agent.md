# 🚀 ELK Agent Installation Guide (Auditbeat, Metricbeat, Packetbeat)

[![Elastic Stack](https://img.shields.io/badge/Elastic%20Stack-8.x-blue?logo=elastic&logoColor=white)](https://www.elastic.co/beats/)
[![Linux](https://img.shields.io/badge/OS-Linux-orange?logo=linux&logoColor=white)](https://ubuntu.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

This guide explains how to install **Elastic Beats Agents** (`Metricbeat`, `Auditbeat`, and `Packetbeat`) on **Debian/Ubuntu/Kali Linux** and connect them to your **ELK Server**.

---

## 📑 Table of Contents
- [📌 Prerequisites](#-prerequisites)
- [🔑 Add Elastic Repository](#-add-elastic-repository)
- [📦 Install & Configure Beats](#-install--configure-beats)
  - [Metricbeat](#-metricbeat)
  - [Auditbeat](#-auditbeat)
  - [Packetbeat](#-packetbeat)
- [🛠️ Service Management](#️-service-management)
- [✅ Testing Configurations](#-testing-configurations)
- [⚠️ Notes](#️-notes)

---

## 📌 Prerequisites

- OS: **Debian/Ubuntu/Kali (APT-based systems)**
- Required tools: `curl`, `gnupg`, `apt-transport-https`



```
sudo apt update && sudo apt install curl gnupg apt-transport-https -y
```


---

## 🔑 Add Elastic Repository

```
curl -fsSL [https://artifacts.elastic.co/GPG-KEY-elasticsearch](https://artifacts.elastic.co/GPG-KEY-elasticsearch) |  
sudo gpg --dearmor -o /usr/share/keyrings/elastic.gpg

echo "deb [signed-by=/usr/share/keyrings/elastic.gpg] [https://artifacts.elastic.co/packages/8.x/apt](https://artifacts.elastic.co/packages/8.x/apt) stable main" |  
sudo tee /etc/apt/sources.list.d/elastic-8.x.list

sudo apt update
```



---

## 📦 Install & Configure Beats

### 📊 Metricbeat

**Install**


```
sudo apt install metricbeat -y
```




**Configuration:** `/etc/metricbeat/metricbeat.yml`

output.elasticsearch:  
hosts: ["http://<ELK_SERVER_IP>:9200"]

setup.kibana:  
host: "http://<ELK_SERVER_IP>:5601"

metricbeat.modules:

- module: system  
    metricsets:
    
    - cpu
        
    - memory
        
    - network
        
    - process
        
    - process_summary
        
    - uptime  
        enabled: true  
        period: 10s  
        processes: ['.*']



**Enable & Start** 

```
sudo metricbeat setup  
sudo systemctl enable --now metricbeat
```



---

### 🔒 Auditbeat

**Install**


```
sudo apt install auditbeat -y
```


**Configuration:** `/etc/auditbeat/auditbeat.yml`

output.elasticsearch:  
hosts: ["http://<ELK_SERVER_IP>:9200"]

setup.kibana:  
host: "http://<ELK_SERVER_IP>:5601"

auditbeat.modules:

- module: auditd  
    resolve_ids: true  
    failure_mode: silent  
    backlog_limit: 8196  
    rate_limit: 0  
    include_raw_message: true  
    include_warnings: true
    
- module: file_integrity  
    paths:
    
    - /bin
        
    - /usr/bin
        
    - /sbin
        
    - /usr/sbin




**Enable & Start**


```
sudo auditbeat setup  
sudo systemctl enable --now auditbeat
```






---

### 🌐 Packetbeat

**Install**


```
sudo apt install packetbeat -y
```


**Configuration:** `/etc/packetbeat/packetbeat.yml`


output.elasticsearch:  
hosts: ["http://<ELK_SERVER_IP>:9200"]

setup.kibana:  
host: "http://<ELK_SERVER_IP>:5601"

packetbeat.interfaces.device: any

packetbeat.protocols:

- type: dns  
    ports:
    
- type: http  
    ports: [80, 8080, 8000, 5000,2]
    
- type: tls  
    ports:
    
- type: icmp


**Enable & Start**

```
sudo packetbeat setup  
sudo systemctl enable --now packetbeat
```



---

## 🛠️ Service Management

| Service    | Start                          | Enable                           | Restart                           | Status                           |
|------------|--------------------------------|----------------------------------|-----------------------------------|----------------------------------|
| Metricbeat | `sudo systemctl start metricbeat` | `sudo systemctl enable metricbeat` | `sudo systemctl restart metricbeat` | `sudo systemctl status metricbeat` |
| Auditbeat  | `sudo systemctl start auditbeat`  | `sudo systemctl enable auditbeat`  | `sudo systemctl restart auditbeat`  | `sudo systemctl status auditbeat`  |
| Packetbeat | `sudo systemctl start packetbeat` | `sudo systemctl enable packetbeat` | `sudo systemctl restart packetbeat` | `sudo systemctl status packetbeat` |

---

## ✅ Testing Configurations

Run these to test configuration syntax before restarting services:


```
sudo metricbeat test config  
sudo auditbeat test config  
sudo packetbeat test config
```





---

## ⚠️ Notes

- Replace `<ELK_SERVER_IP>` with your actual **Elastic Server IP address** or **DNS name**.
- Always reload systemd services after modifying configs:

```
sudo systemctl daemon-reload
```


- Ensure your **ELK server** (`Elasticsearch` and `Kibana`) is running before starting the agents.

---

## 📜 License
This project is licensed under the [MIT License](LICENSE).

---

✨ With this setup, `Metricbeat`, `Auditbeat`, and `Packetbeat` will send system, security, and network data to your **ELK Stack** for monitoring.

---



